# ============================================
# CONFIGURAÇÕES DO SERVIDOR
# ============================================
PORT=3000
NODE_ENV=production

# ============================================
# CORS - Origens permitidas
# ============================================
# Para permitir todas as origens, use: *
# Para múltiplas origens, separe por vírgula: http://localhost:3001,https://seudominio.com
CORS_ORIGIN=*



# ============================================
# BANCO DE DADOS - PostgreSQL
# ============================================
DATABASE_URL="postgresql://postgres:password@localhost:5432/api_lojas?schema=public"

# Configurações de Connection Pooling (Opcional)
# Número máximo de conexões simultâneas no pool (padrão: 10)
# Ajuste conforme a capacidade do seu servidor PostgreSQL
DATABASE_CONNECTION_LIMIT=10

# Número de tentativas de retry em caso de erro de conexão (padrão: 3)
DATABASE_RETRY_ATTEMPTS=3

# Para ambientes de produção com alta carga, considere usar:
# - PgBouncer como connection pooler externo
# - Prisma Data Proxy (Prisma Accelerate)
# Nestes casos, use a URL do pooler como DATABASE_URL

# ============================================
# AUTENTICAÇÃO E SEGURANÇA
# ============================================
# Chave secreta para JWT - ALTERE PARA UMA CHAVE FORTE EM PRODUÇÃO
JWT_SECRET=sua-chave-secreta-super-segura-mude-isso-em-producao
JWT_EXPIRES_IN="22h"
# ============================================
# RATE LIMITING (Limite de Requisições)
# ============================================
# Tempo em segundos para janela de rate limiting
THROTTLE_TTL=60
# Número máximo de requisições por janela
THROTTLE_LIMIT=100

# ============================================
# FOCUS NFE - EMISSÃO DE NOTAS FISCAIS
# ============================================
# Provedor fiscal (focusnfe recomendado)
FISCAL_PROVIDER=focusnfe

# API Key do Focus NFe (MESMO PLANO PARA TODAS AS EMPRESAS)
# Obtenha em: https://focusnfe.com.br
FOCUSNFE_API_KEY=J0Ct8SWoWdM754AYfnAaf

# URL base do Focus NFe
# Homologação: https://homologacao.focusnfe.com.br
# Produção: https://api.focusnfe.com.br
FOCUSNFE_BASE_URL=https://homologacao.focusnfe.com.br

# Ambiente fiscal (sandbox ou production)
# Use 'sandbox' para testes e 'production' para emissão real
FISCAL_ENVIRONMENT=sandbox

# ============================================
# FIREBASE STORAGE - ARMAZENAMENTO DE IMAGENS
# ============================================
# Credenciais do Firebase (obtidas no Console do Firebase)
# Console: https://console.firebase.google.com/
FIREBASE_PROJECT_ID=""
FIREBASE_CLIENT_EMAIL=""
FIREBASE_PRIVATE_KEY=""
FIREBASE_STORAGE_BUCKET=""

# ============================================
# WHATSAPP - EVOLUTION API (OBRIGATÓRIO PARA MENSAGENS AUTOMÁTICAS)
# ============================================
# URL da Evolution API (sem barra no final)
# IMPORTANTE: Quando rodando com Docker Compose, use: http://evolution-api:8080
# Para acesso externo (fora do Docker), use: http://localhost:8080 ou https://api.seudominio.com:8080
# O docker-compose.yml já configura automaticamente para comunicação interna entre containers
EVOLUTION_API_URL=http://evolution-api:8080

# API Key da Evolution API (deve ser igual ao AUTHENTICATION_API_KEY do docker-compose)
# IMPORTANTE: Use uma chave forte e segura em produção
# Esta chave será usada tanto no docker-compose.yml quanto aqui
EVOLUTION_API_KEY=sua-chave-secreta-forte-aqui

# Nome da instância do WhatsApp criada na Evolution API
# Exemplo: montshop, minha-loja, loja-1, etc.
# IMPORTANTE: Você precisará criar esta instância após iniciar os containers
EVOLUTION_INSTANCE=montshop

# ============================================
# WHATSAPP BUSINESS API (OPCIONAL - DEPRECADO)
# ============================================
# URL da API do WhatsApp Business (não usado mais)
WHATSAPP_API_URL=https://api.whatsapp.com
# Token de autenticação do WhatsApp (não usado mais)
WHATSAPP_TOKEN=seu-token-whatsapp


# ============================================
# N8N WEBHOOKS (OPCIONAL)
# ============================================
# URL do webhook do N8N para automações
N8N_WEBHOOK_URL=https://seu-n8n.com/webhook/seu-webhook-id

# ============================================
# IBPT - IMPOSTOS APROXIMADOS (OPCIONAL)
# ============================================
# Token da API IBPT para cálculo de impostos aproximados
# Obtenha em: https://ibpt.com.br
IBPT_TOKEN=seu-token-ibpt

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 
# 1. FOCUS NFE:
#    - A API Key configurada aqui será usada para TODAS as empresas
#    - Os dados fiscais de cada empresa (CNPJ, regime tributário, CSC, etc.)
#      são configurados individualmente na página de configuração de cada empresa
#    - Certifique-se de ter um plano adequado no Focus NFe para o número de empresas
#
# 2. FIREBASE:
#    - As imagens dos produtos serão armazenadas no Firebase Storage
#    - Certifique-se de configurar as regras de segurança do Firebase
#    - A chave privada deve manter as quebras de linha (\n)
#
# 3. JWT_SECRET:
#    - Use uma chave forte e única em produção
#    - NUNCA compartilhe esta chave ou a exponha publicamente
#
# 4. SMTP:
#    - Para Gmail, ative a verificação em 2 etapas e use "Senhas de app"
#    - Para outros provedores, verifique as configurações SMTP específicas
#
# 5. BANCO DE DADOS:
#    - Faça backup regular do banco de dados em produção
#    - Use SSL/TLS na conexão em ambientes de produção
#
# 6. EVOLUTION API (WhatsApp):
#    - Configure EVOLUTION_API_URL, EVOLUTION_API_KEY e EVOLUTION_INSTANCE
#    - Certifique-se de que a Evolution API está rodando e acessível
#    - A instância do WhatsApp deve estar conectada (status: open)
#    - Para mais detalhes, consulte: docs/EVOLUTION-API-SETUP.md
#    - O sistema de mensagens automáticas de cobrança executa diariamente às 7h (horário de Brasília)
#    - Apenas empresas com autoMessageEnabled=true e autoMessageAllowed=true receberão mensagens automáticas
#

