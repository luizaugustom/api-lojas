# ==========================================
# CONFIGURAÇÃO PARA AMBIENTE COM UUID v4
# ==========================================

# Database - PostgreSQL com suporte a UUID
DATABASE_URL="postgresql://username:password@localhost:5432/api_lojas?schema=public"

# IMPORTANTE: A extensão uuid-ossp deve estar habilitada no PostgreSQL
# Para habilitar, execute: CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

# JWT
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="24h"
JWT_REFRESH_EXPIRES_IN="7d"

# App
PORT=3000
NODE_ENV="development"  # development | production | test

# File Upload
MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_PATH="./uploads"

# Email (para notificações)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM="noreply@yourdomain.com"

# WhatsApp Integration
WHATSAPP_API_URL="https://api.whatsapp.com"
WHATSAPP_TOKEN="your-whatsapp-token"

# N8N Integration
N8N_WEBHOOK_URL="https://your-n8n-instance.com/webhook"
N8N_API_KEY="your-n8n-api-key"

# Printer Settings
PRINTER_TIMEOUT=5000
PRINTER_RETRY_ATTEMPTS=3

# Fiscal Integration
FISCAL_API_URL="https://api.fiscal.com.br"
FISCAL_API_KEY="your-fiscal-api-key"
FISCAL_CERTIFICATE_PATH="./certificates/cert.p12"
FISCAL_CERTIFICATE_PASSWORD="your-cert-password"
FISCAL_ENVIRONMENT="homologation"  # homologation | production

# Rate Limiting (proteção contra ataques)
THROTTLE_TTL=60  # Tempo em segundos
THROTTLE_LIMIT=100  # Número de requisições permitidas

# Security
CORS_ORIGIN="http://localhost:3001,http://localhost:3000"  # Separar por vírgula múltiplas origens
BCRYPT_ROUNDS=12  # Número de rounds para hash de senha

# UUID Validation (configurações)
UUID_STRICT_MODE=true  # Se true, apenas UUID v4 são aceitos
UUID_AUTO_LOWERCASE=true  # Converte UUIDs para lowercase automaticamente

# Database Pool (para melhor performance)
DB_POOL_MIN=2
DB_POOL_MAX=10

# Logging
LOG_LEVEL="debug"  # error | warn | info | debug
LOG_FILE="./logs/app.log"

# Cache (Redis - opcional)
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0

# Monitoring (opcional)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# Feature Flags
ENABLE_SWAGGER=true
ENABLE_GRAPHQL=false
ENABLE_WEBSOCKETS=true

# Admin User (será criado automaticamente no primeiro start)
# IMPORTANTE: Mude estas credenciais em produção!
DEFAULT_ADMIN_LOGIN="admin@admin.com"
DEFAULT_ADMIN_PASSWORD="Admin@123"

# ==========================================
# NOTAS IMPORTANTES
# ==========================================

# 1. UUID v4 Format: xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
#    Onde x é qualquer hex (0-9, a-f) e y é 8, 9, a, ou b

# 2. Antes de usar em produção:
#    - Altere todos os secrets e senhas
#    - Configure CORS_ORIGIN corretamente
#    - Use HTTPS em produção
#    - Configure backup automático do banco
#    - Habilite monitoring (Sentry ou similar)

# 3. Migration UUID:
#    - Execute a migration SQL antes de usar este .env
#    - Veja: prisma/migrations/production_uuid_migration.sql
#    - Leia: MIGRACAO_UUID_GUIA.md

# 4. PostgreSQL UUID Extension:
#    - A extensão uuid-ossp DEVE estar habilitada
#    - Comando: CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

# 5. Performance:
#    - UUIDs são 128 bits (16 bytes)
#    - Ligeiramente maiores que INT (4 bytes)
#    - Mas oferecem benefícios de segurança e distribuição

# 6. Backup:
#    - SEMPRE faça backup antes de migration
#    - Teste em ambiente de homologação primeiro
#    - Mantenha múltiplas cópias de backup

